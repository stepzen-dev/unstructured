<!doctype html>
<html class="no-js"  lang="en" >

<head><meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Chunking" href="chunking.html" /><link rel="prev" title="Extracting" href="extracting.html" />

  <link rel="shortcut icon" href="../_static/unstructured_small.png" /><meta name="generator" content="sphinx-6.2.1, furo 2023.07.26" />
  <title>Staging - Unstructured 0.13.0 documentation</title>
  <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
  <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=369552022d0b975c8e74270ce6eabe0fb7978f24" />
  <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
  <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
  <link rel="stylesheet" type="text/css" href="../_static/unstructured.css" />
  <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
  
  


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-sidebar-background: #FFFFFF;
  --color-sidebar-background-border: #e9eaed;
  --color-sidebar-caption-text: #484848;
  --color-sidebar-link-text: #484848;
  --color-sidebar-link-text--top-level: #484848;
  --color-sidebar-item-background--current: transparent;
  --color-sidebar-item-background--hover: transparent;
  --color-sidebar-item-expander-background: transparent;
  --color-sidebar-item-expander-background--hover: transparent;
  --color-sidebar-search-text: #484848;
  --color-sidebar-search-background: #FFFFFF;
  --color-sidebar-search-background--focus: #FFFFFF;
  --color-sidebar-search-border: #b9b9b9;
  --color-sidebar-search-border-focus: #484848;
  --color-sidebar-current-text: #ff675f;
  --color-content-foreground: #484848;
  --color-toc-title: #212529;
  --color-toc-item-text--hover: #484848;
  --color-toc-item-text--active: #484848;
  --color-table-header: #FDDACA;
  --color-table-bg: #FFE5D9;
  --color-table-row: #FEEDE6;
  --color-link: #ff675f;
  --color-link--hover: #ff675f;
  --content-padding: 5em;
  --content-padding--small: 2em;
  --color-search-icon: #484848;
  --color-search-placeholder: #484848;
  --color-literal: #FF675F;
  --toc-spacing-vertical: 3em;
  --color-page-info: #646776;
  --toc-item-spacing-vertical: 1em;
  --color-img-background: #ffffff;
  --sidebar-tree-space-above: 0;
  --sidebar-caption-space-above: 0;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-sidebar-background: #131416;
  --color-sidebar-background-border: #303335;
  --color-sidebar-caption-text: #FFFFFF;
  --color-sidebar-link-text: #FFFFFF;
  --color-sidebar-link-text--top-level: #FFFFFF;
  --color-sidebar-item-background--current: none;
  --color-sidebar-item-background--hover: none;
  --color-sidebar-item-expander-background: transparent;
  --color-sidebar-item-expander-background--hover: transparent;
  --color-sidebar-search-text: #FFFFFF;
  --color-sidebar-search-background: #131416;
  --color-sidebar-search-background--focus: transparent;
  --color-sidebar-search-border: #FFFFFF;
  --color-sidebar-search-border-focus: #FFFFFF;
  --color-sidebar-search-foreground: #FFFFFF;
  --color-sidebar-current-text: #FFC2BF;
  --color-content-foreground: #FFFFFF;
  --color-toc-title: #FFFFFF;
  --color-toc-item-text--hover: #FFFFFF;
  --color-toc-item-text--active: #FFFFFF;
  --color-table-header: #131416;
  --color-table-bg: #232427;
  --color-table-row: #444444;
  --color-link: #FFC2BF;
  --color-link--hover: #FFC2BF;
  --color-search-icon: #FFFFFF;
  --color-search-placeholder: #FFFFFF;
  --color-literal: #F8C0A7;
  --color-page-info: #FFFFFF;
  --color-img-background: #131416;
  --sidebar-tree-space-above: 0;
  --sidebar-caption-space-above: 0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-sidebar-background: #131416;
  --color-sidebar-background-border: #303335;
  --color-sidebar-caption-text: #FFFFFF;
  --color-sidebar-link-text: #FFFFFF;
  --color-sidebar-link-text--top-level: #FFFFFF;
  --color-sidebar-item-background--current: none;
  --color-sidebar-item-background--hover: none;
  --color-sidebar-item-expander-background: transparent;
  --color-sidebar-item-expander-background--hover: transparent;
  --color-sidebar-search-text: #FFFFFF;
  --color-sidebar-search-background: #131416;
  --color-sidebar-search-background--focus: transparent;
  --color-sidebar-search-border: #FFFFFF;
  --color-sidebar-search-border-focus: #FFFFFF;
  --color-sidebar-search-foreground: #FFFFFF;
  --color-sidebar-current-text: #FFC2BF;
  --color-content-foreground: #FFFFFF;
  --color-toc-title: #FFFFFF;
  --color-toc-item-text--hover: #FFFFFF;
  --color-toc-item-text--active: #FFFFFF;
  --color-table-header: #131416;
  --color-table-bg: #232427;
  --color-table-row: #444444;
  --color-link: #FFC2BF;
  --color-link--hover: #FFC2BF;
  --color-search-icon: #FFFFFF;
  --color-search-placeholder: #FFFFFF;
  --color-literal: #F8C0A7;
  --color-page-info: #FFFFFF;
  --color-img-background: #131416;
  --sidebar-tree-space-above: 0;
  --sidebar-caption-space-above: 0;
  
      }
    }
  }
</style><script src="../_static/jquery.js"></script>
  <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
  <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
  <script src="../_static/doctools.js"></script>
  <script src="../_static/sphinx_highlight.js"></script>
  <script src="../_static/scripts/furo.js"></script>
  <script src="../_static/js/githubStargazers.js"></script>
  <script src="../_static/js/sidebarScrollPosition.js"></script>
  <script src="../_static/custom.js"></script>
  </head>

<body>
  
  <script>
    document.body.dataset.theme = localStorage.getItem("theme") || "auto";
  </script>
  

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<input type="checkbox" class="sidebar-toggle" name="__search" id="__search">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>
<label class="overlay search-overlay" for="__search">
  <div class="visually-hidden">Hide search</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg>
            <use href="#svg-menu"></use>
          </svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html">
        <div class="brand">
					<img class="header-logo only-light" src="../_static/images/logo-light-mode.svg" alt="Light Logo" />
					<img class="header-logo only-dark" src="../_static/images/logo-dark-mode.svg" alt="Dark Logo" />
        </div>
      </a>
    </div>

    <div class="header-right">
      <label class="search-icon" for="__search">
        <div class="visually-hidden">Toggle search</div>
      </label>
      <!-- <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label> -->
    </div>
  </header>
  <div class="header__search">
    <form class="header__search__container" method="get" action="../search.html" role="search">
      <input class="header__search__input" placeholder=Search name="q" aria-label=" Search">
      <input type="hidden" name="check_keywords" value="yes">
      <input type="hidden" name="area" value="default">
      <label class="close-icon" for="__search">
        <div class="visually-hidden">Hide search</div>
      </label>
    </form>
    <div id="searchbox"></div>
  </div>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="theme-toggle-container theme-toggle-header sidebar__theme-toggle">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto">
            <use href="#svg-sun-half"></use>
          </svg>
          <svg class="theme-icon-when-dark">
            <use href="#svg-moon"></use>
          </svg>
          <svg class="theme-icon-when-light">
            <use href="#svg-sun"></use>
          </svg>
        </button>
      </div>
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/images/logo-light-mode.svg" alt="Light Logo" />
    <img class="sidebar-logo only-dark" src="../_static/images/logo-dark-mode.svg" alt="Dark Logo" />
  </div>
  
  
</a>
<div class="social social--sidebar" style="margin-top: 1em; display: flex; justify-content: right; gap: 8px">
  <a
    href="https://short.unstructured.io/pzw05l7"
    class="button--primary" target="_blank">Join <span aria-label="slack" class="slack-icon"></span></span></a>
    <div class="github-stars github-stars--sidebar"></div>
</div><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../introduction.html">Introduction</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Introduction</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../introduction/getting_started.html">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/overview.html">Document Elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/key_concepts.html">Key Concepts</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../installing.html">Installation</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Installation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/full_installation.html">Full Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/docker.html">Docker Installation</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api.html">Unstructured API Services</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Unstructured API Services</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../apis/saas_api.html">SaaS API Deployment Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/azure_marketplace.html">Azure Marketplace Deployment Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/aws_marketplace.html">AWS Marketplace Deployment Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/api_sdks.html">Python and JavaScript SDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/usage_methods.html">Accessing Unstructured API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/api_parameters.html">API Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/validation_errors.html">API Validation Errors</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../platform.html">Unstructured Platform</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Unstructured Platform</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../platforms/workflow.html">Workflows Automation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platforms/job.html">Jobs Scheduling</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../platforms/source_platform.html">Platform Source Connectors</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Platform Source Connectors</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_sources/amazon_s3_source.html">Amazon S3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_sources/azure_blob.html">Azure Blob Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_sources/elasticsearch_source.html">Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_sources/google_cloud_source.html">Google Cloud Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_sources/google_drive.html">Google Drive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_sources/onedrive.html">OneDrive Cloud Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_sources/opensearch.html">OpenSearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_sources/salesforce.html">Salesforce</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_sources/sftp.html">SFTP Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_sources/sharepoint.html">Sharepoint</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../platforms/destination_platform.html">Platform Destination Connectors</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Platform Destination Connectors</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_destinations/amazon_s3_destination.html">Amazon S3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_destinations/azure_cognitive_search.html">Azure Cognitive Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_destinations/chroma.html">Chroma</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_destinations/databricks.html">Databricks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_destinations/elasticsearch_destination.html">Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_destinations/google_cloud_destination.html">Google Cloud Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_destinations/mongodb.html">MongoDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_destinations/opensearch.html">OpenSearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_destinations/pinecone.html">Pinecone</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_destinations/postgresql.html">PostgreSQL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/platform_destinations/weaviate.html">Weaviate</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../core.html">Core Functionality</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Core Functionality</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="partition.html">Partitioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="cleaning.html">Cleaning</a></li>
<li class="toctree-l2"><a class="reference internal" href="extracting.html">Extracting</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Staging</a></li>
<li class="toctree-l2"><a class="reference internal" href="chunking.html">Chunking</a></li>
<li class="toctree-l2"><a class="reference internal" href="embedding.html">Embedding</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ingest/index.html">Ingest</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Ingest</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../ingest/source_connectors.html">Source Connectors</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Source Connectors</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/airtable.html">Airtable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/azure.html">Azure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/biomed.html">Biomed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/box.html">Box</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/confluence.html">Confluence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/delta_table.html">Delta Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/discord.html">Discord</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/dropbox.html">Dropbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/elasticsearch.html">Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/github.html">Github</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/gitlab.html">Gitlab</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/google_cloud_storage.html">Google Cloud Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/google_drive.html">Google Drive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/jira.html">Jira</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/local_connector.html">Local</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/mongodb.html">MongoDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/notion.html">Notion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/onedrive.html">One Drive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/opensearch.html">OpenSearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/outlook.html">Outlook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/reddit.html">Reddit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/s3.html">S3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/salesforce.html">Salesforce</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/sftp.html">Sftp</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/sharepoint.html">Sharepoint</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/slack.html">Slack</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/source_connectors/wikipedia.html">Wikipedia</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../ingest/destination_connectors.html">Destination Connectors</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Destination Connectors</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/astra.html">Astra</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/azure.html">Azure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/azure_cognitive_search.html">Azure Cognitive Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/box.html">Box</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/chroma.html">Chroma</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/clarifai.html">Clarifai</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/databricks_volumes.html">Databricks Volumes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/delta_table.html">Delta Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/dropbox.html">Dropbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/elasticsearch.html">Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/gcs.html">Google Cloud Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/mongodb.html">MongoDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/pinecone.html">Pinecone</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/opensearch.html">OpenSearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/qdrant.html">Qdrant</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/s3.html">S3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/sql.html">SQL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/vectara.html">Vectara</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/destination_connectors/weaviate.html">Weaviate</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../ingest/configs.html">Ingest Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Ingest Configuration</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../ingest/configs/processor_config.html">Processor Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/configs/read_config.html">Read Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/configs/partition_config.html">Partition Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/configs/permissions_config.html">Permissions Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/configs/retry_strategy_config.html">Retry Strategy Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/configs/chunking_config.html">Chunking Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/configs/embedding_config.html">Embedding Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/configs/fsspec_config.html">Fsspec Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../metadata.html">Metadata</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../examples.html">Examples</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples/chroma.html">Data Processing into Vector Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/databricks.html">Delta Table Source Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/dict_to_elements.html">Multi-files API Processing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../integrations.html">Integrations</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../best_practices.html">Best Practices</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Best Practices</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../best_practices/strategies.html">Strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../best_practices/models.html">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../best_practices/table_extraction_pdf.html">Table Extraction from PDF</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto">
                <use href="#svg-sun-half"></use>
              </svg>
              <svg class="theme-icon-when-dark">
                <use href="#svg-moon"></use>
              </svg>
              <svg class="theme-icon-when-light">
                <use href="#svg-sun"></use>
              </svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg>
                <use href="#svg-toc"></use>
              </svg></i>
          </label>
        </div>
        <div class="header-center">
          <a href="../index.html">
            <div class="brand">
            </div>
          </a>
        </div>
        <article role="main">
          <div class="social social--main" style="margin-top: 1em; display: flex; justify-content: right; gap: 8px">
            <a href="https://short.unstructured.io/pzw05l7"
              class="button--primary" target="_blank">Join <span aria-label="slack"
                class="slack-icon"></span></span></a>
            <div class="github-stars github-stars--top-page"></div>
            <!-- Calendly badge widget begin -->
          </div>
          <section id="staging">
<h1>Staging<a class="headerlink" href="#staging" title="Permalink to this heading"></a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Staging</span></code> brick is being deprecated in favor of the new and more comprehensive <code class="docutils literal notranslate"><span class="pre">Destination</span> <span class="pre">Connectors</span></code>. To explore the complete list and usage, please refer to <a class="reference external" href="https://unstructured-io.github.io/unstructured/ingest/destination_connectors.html">Destination Connectors documentation</a>.</p>
<p>Note: We are constantly expanding our collection of destination connectors. If you wish to request a specific Destination Connector, you’re encouraged to submit a Feature Request on the <a class="reference external" href="https://github.com/Unstructured-IO/unstructured/issues/new/choose">Unstructured GitHub repository</a>.</p>
</div>
<p>Staging functions in the <code class="docutils literal notranslate"><span class="pre">unstructured</span></code> package help prepare your data for ingestion into downstream systems.
A staging function accepts a list of document elements as input and return an appropriately formatted dictionary as output.
In the example below, we get our narrative text samples prepared for ingestion into LabelStudio using
<code class="docutils literal notranslate"><span class="pre">the</span> <span class="pre">stage_for_label_studio</span></code> function.
We can take this data and directly upload it into LabelStudio to quickly get started with an NLP labeling task.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.label_studio</span> <span class="kn">import</span> <span class="n">stage_for_label_studio</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">stage_for_label_studio</span><span class="p">(</span><span class="n">narrative_text</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">output</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
</pre></div>
</div>
<section id="convert-to-csv">
<h2><code class="docutils literal notranslate"><span class="pre">convert_to_csv</span></code><a class="headerlink" href="#convert-to-csv" title="Permalink to this heading"></a></h2>
<p>Converts outputs to the initial structured data (ISD) format as a CSV string.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unstructured.documents.elements</span> <span class="kn">import</span> <span class="n">Title</span><span class="p">,</span> <span class="n">NarrativeText</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.base</span> <span class="kn">import</span> <span class="n">convert_to_csv</span>

<span class="n">elements</span> <span class="o">=</span> <span class="p">[</span><span class="n">Title</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Title&quot;</span><span class="p">),</span> <span class="n">NarrativeText</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Narrative&quot;</span><span class="p">)]</span>
<span class="n">isd_csv</span> <span class="o">=</span> <span class="n">convert_to_csv</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>
</pre></div>
</div>
<p>For more information about the <code class="docutils literal notranslate"><span class="pre">convert_to_csv</span></code> function, you can check the <a class="reference external" href="https://github.com/Unstructured-IO/unstructured/blob/a583d47b841bdd426b9058b7c34f6aa3ed8de152/unstructured/staging/base.py">source code here</a>.</p>
</section>
<section id="convert-to-dataframe">
<h2><code class="docutils literal notranslate"><span class="pre">convert_to_dataframe</span></code><a class="headerlink" href="#convert-to-dataframe" title="Permalink to this heading"></a></h2>
<p>Converts a list of document <code class="docutils literal notranslate"><span class="pre">Element</span></code> objects to a <code class="docutils literal notranslate"><span class="pre">pandas</span></code> dataframe. The dataframe
will have a <code class="docutils literal notranslate"><span class="pre">text</span></code> column with the text from the element and a <code class="docutils literal notranslate"><span class="pre">type</span></code> column
indicating the element type, such as <code class="docutils literal notranslate"><span class="pre">NarrativeText</span></code> or <code class="docutils literal notranslate"><span class="pre">Title</span></code>.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unstructured.documents.elements</span> <span class="kn">import</span> <span class="n">Title</span><span class="p">,</span> <span class="n">NarrativeText</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.base</span> <span class="kn">import</span> <span class="n">convert_to_dataframe</span>

<span class="n">elements</span> <span class="o">=</span> <span class="p">[</span><span class="n">Title</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Title&quot;</span><span class="p">),</span> <span class="n">NarrativeText</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Narrative&quot;</span><span class="p">)]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">convert_to_dataframe</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>
</pre></div>
</div>
<p>For more information about the <code class="docutils literal notranslate"><span class="pre">convert_to_dataframe</span></code> function, you can check the <a class="reference external" href="https://github.com/Unstructured-IO/unstructured/blob/a583d47b841bdd426b9058b7c34f6aa3ed8de152/unstructured/staging/base.py">source code here</a>.</p>
</section>
<section id="convert-to-dict">
<h2><code class="docutils literal notranslate"><span class="pre">convert_to_dict</span></code><a class="headerlink" href="#convert-to-dict" title="Permalink to this heading"></a></h2>
<p>Converts a list of <code class="docutils literal notranslate"><span class="pre">Element</span></code> objects to a dictionary. This is the default format
for representing documents in <code class="docutils literal notranslate"><span class="pre">unstructured</span></code>.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unstructured.documents.elements</span> <span class="kn">import</span> <span class="n">Title</span><span class="p">,</span> <span class="n">NarrativeText</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.base</span> <span class="kn">import</span> <span class="n">convert_to_dict</span>

<span class="n">elements</span> <span class="o">=</span> <span class="p">[</span><span class="n">Title</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Title&quot;</span><span class="p">),</span> <span class="n">NarrativeText</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Narrative&quot;</span><span class="p">)]</span>
<span class="n">isd</span> <span class="o">=</span> <span class="n">convert_to_dict</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>
</pre></div>
</div>
<p>For more information about the <code class="docutils literal notranslate"><span class="pre">convert_to_dict</span></code> function, you can check the <a class="reference external" href="https://github.com/Unstructured-IO/unstructured/blob/a583d47b841bdd426b9058b7c34f6aa3ed8de152/unstructured/staging/base.py">source code here</a>.</p>
</section>
<section id="dict-to-elements">
<h2><code class="docutils literal notranslate"><span class="pre">dict_to_elements</span></code><a class="headerlink" href="#dict-to-elements" title="Permalink to this heading"></a></h2>
<p>Converts a dictionary of the format produced by <code class="docutils literal notranslate"><span class="pre">convert_to_dict</span></code> back to a list of <code class="docutils literal notranslate"><span class="pre">Element</span></code> objects.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unstructured.staging.base</span> <span class="kn">import</span> <span class="n">dict_to_elements</span>

<span class="n">isd</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;My Title&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Title&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;My Narrative&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;NarrativeText&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="c1"># elements will look like:</span>
<span class="c1"># [ Title(text=&quot;My Title&quot;), NarrativeText(text=&quot;My Narrative&quot;)]</span>
<span class="n">elements</span> <span class="o">=</span> <span class="n">dict_to_elements</span><span class="p">(</span><span class="n">isd</span><span class="p">)</span>
</pre></div>
</div>
<p>For more information about the <code class="docutils literal notranslate"><span class="pre">dict_to_elements</span></code> function, you can check the <a class="reference external" href="https://github.com/Unstructured-IO/unstructured/blob/a583d47b841bdd426b9058b7c34f6aa3ed8de152/unstructured/staging/base.py">source code here</a>.</p>
</section>
<section id="stage-csv-for-prodigy">
<h2><code class="docutils literal notranslate"><span class="pre">stage_csv_for_prodigy</span></code><a class="headerlink" href="#stage-csv-for-prodigy" title="Permalink to this heading"></a></h2>
<p>Formats outputs in CSV format for use with <a class="reference external" href="https://prodi.gy/docs/api-loaders">Prodigy</a>. After running <code class="docutils literal notranslate"><span class="pre">stage_csv_for_prodigy</span></code>, you can
write the results to a CSV file that is ready to be used with Prodigy.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unstructured.documents.elements</span> <span class="kn">import</span> <span class="n">Title</span><span class="p">,</span> <span class="n">NarrativeText</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.prodigy</span> <span class="kn">import</span> <span class="n">stage_csv_for_prodigy</span>

<span class="n">elements</span> <span class="o">=</span> <span class="p">[</span><span class="n">Title</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Title&quot;</span><span class="p">),</span> <span class="n">NarrativeText</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Narrative&quot;</span><span class="p">)]</span>
<span class="n">metadata</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;title&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;news&quot;</span><span class="p">}]</span>
<span class="n">prodigy_csv_data</span> <span class="o">=</span> <span class="n">stage_csv_for_prodigy</span><span class="p">(</span><span class="n">elements</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span>

<span class="c1"># The resulting CSV file is ready to be used with Prodigy</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;prodigy.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csv_file</span><span class="p">:</span>
    <span class="n">csv_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">prodigy_csv_data</span><span class="p">)</span>
</pre></div>
</div>
<p>For more information about the <code class="docutils literal notranslate"><span class="pre">stage_csv_for_prodigy</span></code> function, you can check the <a class="reference external" href="https://github.com/Unstructured-IO/unstructured/blob/a583d47b841bdd426b9058b7c34f6aa3ed8de152/unstructured/staging/prodigy.py">source code here</a>.</p>
</section>
<section id="stage-for-argilla">
<h2><code class="docutils literal notranslate"><span class="pre">stage_for_argilla</span></code><a class="headerlink" href="#stage-for-argilla" title="Permalink to this heading"></a></h2>
<p>Convert a list of <code class="docutils literal notranslate"><span class="pre">Text</span></code> elements to an <a class="reference external" href="https://docs.argilla.io/en/latest/reference/python/python_client.html#python-ref-datasets">Argilla Dataset</a>.
The type of Argilla dataset to be generated can be specified with <code class="docutils literal notranslate"><span class="pre">argilla_task</span></code>
parameter. Valid values for <code class="docutils literal notranslate"><span class="pre">argilla_task</span></code> are <code class="docutils literal notranslate"><span class="pre">&quot;text_classification&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;token_classification&quot;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&quot;text2text&quot;</span></code>. If <code class="docutils literal notranslate"><span class="pre">&quot;token_classification&quot;</span></code> is selected
and <code class="docutils literal notranslate"><span class="pre">tokens</span></code> is not included in the optional kwargs, the <code class="docutils literal notranslate"><span class="pre">nltk</span></code> word tokenizer
is used by default.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">unstructured.documents.elements</span> <span class="kn">import</span> <span class="n">Title</span><span class="p">,</span> <span class="n">NarrativeText</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.argilla</span> <span class="kn">import</span> <span class="n">stage_for_argilla</span>

<span class="n">elements</span> <span class="o">=</span> <span class="p">[</span><span class="n">Title</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Title&quot;</span><span class="p">),</span> <span class="n">NarrativeText</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Narrative&quot;</span><span class="p">)]</span>
<span class="n">metadata</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;title&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">}]</span>

<span class="n">argilla_dataset</span> <span class="o">=</span> <span class="n">stage_for_argilla</span><span class="p">(</span><span class="n">elements</span><span class="p">,</span> <span class="s2">&quot;text_classification&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">)</span>
</pre></div>
</div>
<p>For more information about the <code class="docutils literal notranslate"><span class="pre">stage_for_argilla</span></code> function, you can check the <a class="reference external" href="https://github.com/Unstructured-IO/unstructured/blob/a583d47b841bdd426b9058b7c34f6aa3ed8de152/unstructured/staging/argilla.py">source code here</a>.</p>
</section>
<section id="stage-for-baseplate">
<h2><code class="docutils literal notranslate"><span class="pre">stage_for_baseplate</span></code><a class="headerlink" href="#stage-for-baseplate" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">stage_for_baseplate</span></code> staging function prepares a list of <code class="docutils literal notranslate"><span class="pre">Element</span></code> objects for ingestion
into <a class="reference external" href="https://docs.baseplate.ai/introduction">Baseplate</a>, an LLM backend with a spreadsheet interface.
After running the <code class="docutils literal notranslate"><span class="pre">stage_for_baseplate</span></code> function, you can use the
<a class="reference external" href="https://docs.baseplate.ai/api-reference/documents/upsert-data-rows">Baseplate API</a> to upload the documents
to Baseplate. The following example code shows how to use the <code class="docutils literal notranslate"><span class="pre">stage_for_baseplate</span></code> function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unstructured.documents.elements</span> <span class="kn">import</span> <span class="n">ElementMetadata</span><span class="p">,</span> <span class="n">NarrativeText</span><span class="p">,</span> <span class="n">Title</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.baseplate</span> <span class="kn">import</span> <span class="n">stage_for_baseplate</span>

<span class="n">metadata</span> <span class="o">=</span> <span class="n">ElementMetadata</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;fox.epub&quot;</span><span class="p">)</span>

<span class="n">elements</span> <span class="o">=</span> <span class="p">[</span>
  <span class="n">Title</span><span class="p">(</span><span class="s2">&quot;A Wonderful Story About A Fox&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">),</span>
  <span class="n">NarrativeText</span><span class="p">(</span>
    <span class="s2">&quot;A fox ran into the chicken coop and the chickens flew off!&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
  <span class="p">),</span>
<span class="p">]</span>

<span class="n">rows</span> <span class="o">=</span> <span class="n">stage_for_baseplate</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>
</pre></div>
</div>
<p>The output will look like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
      <span class="s2">&quot;rows&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
              <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="s2">&quot;element_id&quot;</span><span class="p">:</span> <span class="s2">&quot;ad270eefd1cc68d15f4d3e51666d4dc8&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;A Wonderful Story About A Fox&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Title&quot;</span><span class="p">,</span>
              <span class="p">},</span>
              <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;fox.epub&quot;</span><span class="p">},</span>
          <span class="p">},</span>
          <span class="p">{</span>
              <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="s2">&quot;element_id&quot;</span><span class="p">:</span> <span class="s2">&quot;8275769fdd1804f9f2b55ad3c9b0ef1b&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;A fox ran into the chicken coop and the chickens flew off!&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;NarrativeText&quot;</span><span class="p">,</span>
              <span class="p">},</span>
              <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;fox.epub&quot;</span><span class="p">},</span>
          <span class="p">},</span>
      <span class="p">],</span>
  <span class="p">}</span>
</pre></div>
</div>
<p>For more information about the <code class="docutils literal notranslate"><span class="pre">stage_for_baseplate</span></code> function, you can check the <a class="reference external" href="https://github.com/Unstructured-IO/unstructured/blob/a583d47b841bdd426b9058b7c34f6aa3ed8de152/unstructured/staging/baseplate.py">source code here</a>.</p>
</section>
<section id="stage-for-datasaur">
<h2><code class="docutils literal notranslate"><span class="pre">stage_for_datasaur</span></code><a class="headerlink" href="#stage-for-datasaur" title="Permalink to this heading"></a></h2>
<p>Formats a list of <code class="docutils literal notranslate"><span class="pre">Text</span></code> elements as input to token based tasks in Datasaur.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unstructured.documents.elements</span> <span class="kn">import</span> <span class="n">Text</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.datasaur</span> <span class="kn">import</span> <span class="n">stage_for_datasaur</span>

<span class="n">elements</span>  <span class="o">=</span> <span class="p">[</span><span class="n">Text</span><span class="p">(</span><span class="s2">&quot;Text1&quot;</span><span class="p">),</span><span class="n">Text</span><span class="p">(</span><span class="s2">&quot;Text2&quot;</span><span class="p">)]</span>
<span class="n">datasaur_data</span> <span class="o">=</span> <span class="n">stage_for_datasaur</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>
</pre></div>
</div>
<p>The output is a list of dictionaries, each one with two keys:
“text” with the content of the element and
“entities” with an empty list.</p>
<p>You can also specify entities in the <code class="docutils literal notranslate"><span class="pre">stage_for_datasaur</span></code> function. Entities
you specify in the input will be included in the entities key in the output. The list
of entities is a list of dictionaries and must have all of the keys in the example below.
The list of entities must be the same length as the list of elements. Use an empty
list for any elements that do not have any entities.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unstructured.documents.elements</span> <span class="kn">import</span> <span class="n">Text</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.datasaur</span> <span class="kn">import</span> <span class="n">stage_for_datasaur</span>

<span class="n">elements</span>  <span class="o">=</span> <span class="p">[</span><span class="n">Text</span><span class="p">(</span><span class="s2">&quot;Hi my name is Matt.&quot;</span><span class="p">)]</span>
<span class="n">entities</span> <span class="o">=</span> <span class="p">[[{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;PER&quot;</span><span class="p">,</span> <span class="s2">&quot;start_idx&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;end_idx&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">}]]</span>
<span class="n">datasaur_data</span> <span class="o">=</span> <span class="n">stage_for_datasaur</span><span class="p">(</span><span class="n">elements</span><span class="p">,</span> <span class="n">entities</span><span class="p">)</span>
</pre></div>
</div>
<p>For more information about the <code class="docutils literal notranslate"><span class="pre">stage_for_datasaur</span></code> function, you can check the <a class="reference external" href="https://github.com/Unstructured-IO/unstructured/blob/a583d47b841bdd426b9058b7c34f6aa3ed8de152/unstructured/staging/datasaur.py">source code here</a>.</p>
</section>
<section id="stage-for-label-box">
<h2><code class="docutils literal notranslate"><span class="pre">stage_for_label_box</span></code><a class="headerlink" href="#stage-for-label-box" title="Permalink to this heading"></a></h2>
<p>Formats outputs for use with <a class="reference external" href="https://docs.labelbox.com/docs/overview">LabelBox</a>. LabelBox accepts cloud-hosted data
and does not support importing text directly. The <code class="docutils literal notranslate"><span class="pre">stage_for_label_box</span></code> does the following:</p>
<ul class="simple">
<li><p>Stages the data files in the <code class="docutils literal notranslate"><span class="pre">output_directory</span></code> specified in function arguments to be uploaded to a cloud storage service.</p></li>
<li><p>Returns a config of type <code class="docutils literal notranslate"><span class="pre">List[Dict[str,</span> <span class="pre">Any]]</span></code> that can be written to a <code class="docutils literal notranslate"><span class="pre">json</span></code> file and imported into LabelBox.</p></li>
</ul>
<p><strong>Note:</strong> <code class="docutils literal notranslate"><span class="pre">stage_for_label_box</span></code> does not upload the data to remote storage such as S3. Users can upload the data to S3
using <code class="docutils literal notranslate"><span class="pre">aws</span> <span class="pre">s3</span> <span class="pre">sync</span> <span class="pre">${output_directory}</span> <span class="pre">${url_prefix}</span></code> after running the <code class="docutils literal notranslate"><span class="pre">stage_for_label_box</span></code> staging function.</p>
<p>Examples:</p>
<p>The following example demonstrates generating a <code class="docutils literal notranslate"><span class="pre">config.json</span></code> file that can be used with LabelBox and uploading the staged data
files to an S3 bucket.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">unstructured.documents.elements</span> <span class="kn">import</span> <span class="n">Title</span><span class="p">,</span> <span class="n">NarrativeText</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.label_box</span> <span class="kn">import</span> <span class="n">stage_for_label_box</span>

<span class="c1"># The S3 Bucket name where data files should be uploaded.</span>
<span class="n">S3_BUCKET_NAME</span> <span class="o">=</span> <span class="s2">&quot;labelbox-staging-bucket&quot;</span>

<span class="c1"># The S3 key prefix (I.e. directory) where data files should be stored.</span>
<span class="n">S3_BUCKET_KEY_PREFIX</span> <span class="o">=</span> <span class="s2">&quot;data/&quot;</span>

<span class="c1"># The URL prefix where the data files will be accessed.</span>
<span class="n">S3_URL_PREFIX</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="n">S3_BUCKET_NAME</span><span class="si">}</span><span class="s2">.s3.amazonaws.com/</span><span class="si">{</span><span class="n">S3_BUCKET_KEY_PREFIX</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># The local output directory where the data files will be staged for uploading to a Cloud Storage service.</span>
<span class="n">LOCAL_OUTPUT_DIRECTORY</span> <span class="o">=</span> <span class="s2">&quot;/tmp/labelbox-staging&quot;</span>

<span class="n">elements</span> <span class="o">=</span> <span class="p">[</span><span class="n">Title</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Title&quot;</span><span class="p">),</span> <span class="n">NarrativeText</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Narrative&quot;</span><span class="p">)]</span>

<span class="n">labelbox_config</span> <span class="o">=</span> <span class="n">stage_for_label_box</span><span class="p">(</span>
    <span class="n">elements</span><span class="p">,</span>
    <span class="n">output_directory</span><span class="o">=</span><span class="n">LOCAL_OUTPUT_DIRECTORY</span><span class="p">,</span>
    <span class="n">url_prefix</span><span class="o">=</span><span class="n">S3_URL_PREFIX</span><span class="p">,</span>
    <span class="n">external_ids</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;id1&quot;</span><span class="p">,</span> <span class="s2">&quot;id2&quot;</span><span class="p">],</span>
    <span class="n">attachments</span><span class="o">=</span><span class="p">[[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;RAW_TEXT&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Title description&quot;</span><span class="p">}],</span> <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;RAW_TEXT&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Narrative Description&quot;</span><span class="p">}]],</span>
    <span class="n">create_directory</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># The resulting JSON config file is ready to be used with LabelBox.</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;config.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w+&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">labelbox_config_file</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">labelbox_config</span><span class="p">,</span> <span class="n">labelbox_config_file</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>


<span class="c1"># Upload staged data files to S3 from local output directory.</span>
<span class="k">def</span> <span class="nf">upload_staged_files</span><span class="p">():</span>
    <span class="kn">from</span> <span class="nn">s3fs</span> <span class="kn">import</span> <span class="n">S3FileSystem</span>
    <span class="n">fs</span> <span class="o">=</span> <span class="n">S3FileSystem</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">LOCAL_OUTPUT_DIRECTORY</span><span class="p">):</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">LOCAL_OUTPUT_DIRECTORY</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="n">upload_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">S3_BUCKET_KEY_PREFIX</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="n">fs</span><span class="o">.</span><span class="n">put_file</span><span class="p">(</span><span class="n">lpath</span><span class="o">=</span><span class="n">filepath</span><span class="p">,</span> <span class="n">rpath</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">S3_BUCKET_NAME</span><span class="p">,</span> <span class="n">upload_key</span><span class="p">))</span>

<span class="n">upload_staged_files</span><span class="p">()</span>
</pre></div>
</div>
<p>For more information about the <code class="docutils literal notranslate"><span class="pre">stage_for_label_box</span></code> function, you can check the <a class="reference external" href="https://github.com/Unstructured-IO/unstructured/blob/a583d47b841bdd426b9058b7c34f6aa3ed8de152/unstructured/staging/label_box.py">source code here</a>.</p>
</section>
<section id="stage-for-label-studio">
<h2><code class="docutils literal notranslate"><span class="pre">stage_for_label_studio</span></code><a class="headerlink" href="#stage-for-label-studio" title="Permalink to this heading"></a></h2>
<p>Formats outputs for upload to LabelStudio. After running <code class="docutils literal notranslate"><span class="pre">stage_for_label_studio</span></code>, you can
write the results to a JSON folder that is ready to be included in a new LabelStudio project.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">unstructured.documents.elements</span> <span class="kn">import</span> <span class="n">Title</span><span class="p">,</span> <span class="n">NarrativeText</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.label_studio</span> <span class="kn">import</span> <span class="n">stage_for_label_studio</span>

<span class="n">elements</span> <span class="o">=</span> <span class="p">[</span><span class="n">Title</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Title&quot;</span><span class="p">),</span> <span class="n">NarrativeText</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Narrative&quot;</span><span class="p">)]</span>
<span class="n">label_studio_data</span> <span class="o">=</span> <span class="n">stage_for_label_studio</span><span class="p">(</span><span class="n">elements</span><span class="p">,</span> <span class="n">text_field</span><span class="o">=</span><span class="s2">&quot;my_text&quot;</span><span class="p">,</span> <span class="n">id_field</span><span class="o">=</span><span class="s2">&quot;my_id&quot;</span><span class="p">)</span>

<span class="c1"># The resulting JSON file is ready to be uploaded to LabelStudio</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;label_studio.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">label_studio_data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also include pre-annotations and predictions as part of your LabelStudio upload.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">annotations</span></code> kwarg is a list of lists. If <code class="docutils literal notranslate"><span class="pre">annotations</span></code> is specified, there must be a list of
annotations for each element in the <code class="docutils literal notranslate"><span class="pre">elements</span></code> list. If an element does not have any annotations,
use an empty list.
The following shows an example of how to upload annotations for the “Text Classification”
task in LabelStudio:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">unstructured.documents.elements</span> <span class="kn">import</span> <span class="n">NarrativeText</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.label_studio</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">stage_for_label_studio</span><span class="p">,</span>
    <span class="n">LabelStudioAnnotation</span><span class="p">,</span>
    <span class="n">LabelStudioResult</span><span class="p">,</span>
<span class="p">)</span>



<span class="n">elements</span> <span class="o">=</span> <span class="p">[</span><span class="n">NarrativeText</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Narrative&quot;</span><span class="p">)]</span>
<span class="n">annotations</span> <span class="o">=</span> <span class="p">[[</span>
  <span class="n">LabelStudioAnnotation</span><span class="p">(</span>
      <span class="n">result</span><span class="o">=</span><span class="p">[</span>
          <span class="n">LabelStudioResult</span><span class="p">(</span>
              <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;choices&quot;</span><span class="p">,</span>
              <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;choices&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Positive&quot;</span><span class="p">]},</span>
              <span class="n">from_name</span><span class="o">=</span><span class="s2">&quot;sentiment&quot;</span><span class="p">,</span>
              <span class="n">to_name</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="p">,</span>
          <span class="p">)</span>
      <span class="p">]</span>
  <span class="p">)</span>
<span class="p">]]</span>
<span class="n">label_studio_data</span> <span class="o">=</span> <span class="n">stage_for_label_studio</span><span class="p">(</span>
    <span class="n">elements</span><span class="p">,</span>
    <span class="n">annotations</span><span class="o">=</span><span class="n">annotations</span><span class="p">,</span>
    <span class="n">text_field</span><span class="o">=</span><span class="s2">&quot;my_text&quot;</span><span class="p">,</span>
    <span class="n">id_field</span><span class="o">=</span><span class="s2">&quot;my_id&quot;</span>
<span class="p">)</span>

<span class="c1"># The resulting JSON file is ready to be uploaded to LabelStudio</span>
<span class="c1"># with annotations included</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;label_studio.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">label_studio_data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>Similar to annotations, the <code class="docutils literal notranslate"><span class="pre">predictions</span></code> kwarg is also a list of lists. A <code class="docutils literal notranslate"><span class="pre">prediction</span></code> is an annotation with
the addition of a <code class="docutils literal notranslate"><span class="pre">score</span></code> value. If <code class="docutils literal notranslate"><span class="pre">predictions</span></code> is specified, there must be a list of
predictions for each element in the <code class="docutils literal notranslate"><span class="pre">elements</span></code> list. If an element does not have any predictions, use an empty list.
The following shows an example of how to upload predictions for the “Text Classification”
task in LabelStudio:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">unstructured.documents.elements</span> <span class="kn">import</span> <span class="n">NarrativeText</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.label_studio</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">stage_for_label_studio</span><span class="p">,</span>
    <span class="n">LabelStudioPrediction</span><span class="p">,</span>
    <span class="n">LabelStudioResult</span><span class="p">,</span>
<span class="p">)</span>



<span class="n">elements</span> <span class="o">=</span> <span class="p">[</span><span class="n">NarrativeText</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Narrative&quot;</span><span class="p">)]</span>
<span class="n">predictions</span> <span class="o">=</span> <span class="p">[[</span>
  <span class="n">LabelStudioPrediction</span><span class="p">(</span>
      <span class="n">result</span><span class="o">=</span><span class="p">[</span>
          <span class="n">LabelStudioResult</span><span class="p">(</span>
              <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;choices&quot;</span><span class="p">,</span>
              <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;choices&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Positive&quot;</span><span class="p">]},</span>
              <span class="n">from_name</span><span class="o">=</span><span class="s2">&quot;sentiment&quot;</span><span class="p">,</span>
              <span class="n">to_name</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="p">,</span>
          <span class="p">)</span>
      <span class="p">],</span>
      <span class="n">score</span><span class="o">=</span><span class="mf">0.68</span>
  <span class="p">)</span>
<span class="p">]]</span>
<span class="n">label_studio_data</span> <span class="o">=</span> <span class="n">stage_for_label_studio</span><span class="p">(</span>
    <span class="n">elements</span><span class="p">,</span>
    <span class="n">predictions</span><span class="o">=</span><span class="n">predictions</span><span class="p">,</span>
    <span class="n">text_field</span><span class="o">=</span><span class="s2">&quot;my_text&quot;</span><span class="p">,</span>
    <span class="n">id_field</span><span class="o">=</span><span class="s2">&quot;my_id&quot;</span>
<span class="p">)</span>

<span class="c1"># The resulting JSON file is ready to be uploaded to LabelStudio</span>
<span class="c1"># with annotations included</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;label_studio.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">label_studio_data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>The following shows an example of how to upload annotations for the “Named Entity Recognition”
task in LabelStudio:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">unstructured.documents.elements</span> <span class="kn">import</span> <span class="n">NarrativeText</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.label_studio</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">stage_for_label_studio</span><span class="p">,</span>
    <span class="n">LabelStudioAnnotation</span><span class="p">,</span>
    <span class="n">LabelStudioResult</span><span class="p">,</span>
<span class="p">)</span>



<span class="n">elements</span> <span class="o">=</span> <span class="p">[</span><span class="n">NarrativeText</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Narrative&quot;</span><span class="p">)]</span>
<span class="n">annotations</span> <span class="o">=</span> <span class="p">[[</span>
  <span class="n">LabelStudioAnnotation</span><span class="p">(</span>
      <span class="n">result</span><span class="o">=</span><span class="p">[</span>
          <span class="n">LabelStudioResult</span><span class="p">(</span>
              <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;labels&quot;</span><span class="p">,</span>
              <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Narrative&quot;</span><span class="p">,</span> <span class="s2">&quot;labels&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;MISC&quot;</span><span class="p">]},</span>
              <span class="n">from_name</span><span class="o">=</span><span class="s2">&quot;label&quot;</span><span class="p">,</span>
              <span class="n">to_name</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="p">,</span>
          <span class="p">)</span>
      <span class="p">]</span>
  <span class="p">)</span>
<span class="p">]]</span>
<span class="n">label_studio_data</span> <span class="o">=</span> <span class="n">stage_for_label_studio</span><span class="p">(</span>
    <span class="n">elements</span><span class="p">,</span>
    <span class="n">annotations</span><span class="o">=</span><span class="n">annotations</span><span class="p">,</span>
    <span class="n">text_field</span><span class="o">=</span><span class="s2">&quot;my_text&quot;</span><span class="p">,</span>
    <span class="n">id_field</span><span class="o">=</span><span class="s2">&quot;my_id&quot;</span>
<span class="p">)</span>

<span class="c1"># The resulting JSON file is ready to be uploaded to LabelStudio</span>
<span class="c1"># with annotations included</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;label_studio.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">label_studio_data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>See the <a class="reference external" href="https://labelstud.io/tags/labels.html">LabelStudio docs</a> for a full list of options
for labels and annotations.</p>
<p>For more information about the <code class="docutils literal notranslate"><span class="pre">stage_for_label_studio</span></code> function, you can check the <a class="reference external" href="https://github.com/Unstructured-IO/unstructured/blob/a583d47b841bdd426b9058b7c34f6aa3ed8de152/unstructured/staging/label_studio.py">source code here</a>.</p>
</section>
<section id="stage-for-prodigy">
<h2><code class="docutils literal notranslate"><span class="pre">stage_for_prodigy</span></code><a class="headerlink" href="#stage-for-prodigy" title="Permalink to this heading"></a></h2>
<p>Formats outputs in JSON format for use with <a class="reference external" href="https://prodi.gy/docs/api-loaders">Prodigy</a>. After running <code class="docutils literal notranslate"><span class="pre">stage_for_prodigy</span></code>, you can
write the results to a JSON file that is ready to be used with Prodigy.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">unstructured.documents.elements</span> <span class="kn">import</span> <span class="n">Title</span><span class="p">,</span> <span class="n">NarrativeText</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.prodigy</span> <span class="kn">import</span> <span class="n">stage_for_prodigy</span>

<span class="n">elements</span> <span class="o">=</span> <span class="p">[</span><span class="n">Title</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Title&quot;</span><span class="p">),</span> <span class="n">NarrativeText</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Narrative&quot;</span><span class="p">)]</span>
<span class="n">metadata</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;title&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">}]</span>
<span class="n">prodigy_data</span> <span class="o">=</span> <span class="n">stage_for_prodigy</span><span class="p">(</span><span class="n">elements</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span>

<span class="c1"># The resulting JSON file is ready to be used with Prodigy</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;prodigy.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">prodigy_data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Note</strong>: Prodigy recommends <code class="docutils literal notranslate"><span class="pre">.jsonl</span></code> format for feeding data to API loaders. After running <code class="docutils literal notranslate"><span class="pre">stage_for_prodigy</span></code>, you can
use the <code class="docutils literal notranslate"><span class="pre">save_as_jsonl</span></code> utility function to save the formatted data to a <code class="docutils literal notranslate"><span class="pre">.jsonl</span></code> file that is ready to be used with Prodigy.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unstructured.documents.elements</span> <span class="kn">import</span> <span class="n">Title</span><span class="p">,</span> <span class="n">NarrativeText</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.prodigy</span> <span class="kn">import</span> <span class="n">stage_for_prodigy</span>
<span class="kn">from</span> <span class="nn">unstructured.utils</span> <span class="kn">import</span> <span class="n">save_as_jsonl</span>

<span class="n">elements</span> <span class="o">=</span> <span class="p">[</span><span class="n">Title</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Title&quot;</span><span class="p">),</span> <span class="n">NarrativeText</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Narrative&quot;</span><span class="p">)]</span>
<span class="n">metadata</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;title&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">}]</span>
<span class="n">prodigy_data</span> <span class="o">=</span> <span class="n">stage_for_prodigy</span><span class="p">(</span><span class="n">elements</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span>

<span class="c1"># The resulting jsonl file is ready to be used with Prodigy.</span>
<span class="n">save_as_jsonl</span><span class="p">(</span><span class="n">prodigy_data</span><span class="p">,</span> <span class="s2">&quot;prodigy.jsonl&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>For more information about the <code class="docutils literal notranslate"><span class="pre">stage_for_prodigy</span></code> function, you can check the <a class="reference external" href="https://github.com/Unstructured-IO/unstructured/blob/a583d47b841bdd426b9058b7c34f6aa3ed8de152/unstructured/staging/prodigy.py">source code here</a>.</p>
</section>
<section id="stage-for-transformers">
<h2><code class="docutils literal notranslate"><span class="pre">stage_for_transformers</span></code><a class="headerlink" href="#stage-for-transformers" title="Permalink to this heading"></a></h2>
<p>Prepares <code class="docutils literal notranslate"><span class="pre">Text</span></code> elements for processing in <code class="docutils literal notranslate"><span class="pre">transformers</span></code> pipelines
by splitting the elements into chunks that fit into the model’s attention window.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">transformers</span> <span class="kn">import</span> <span class="n">AutoTokenizer</span><span class="p">,</span> <span class="n">AutoModelForTokenClassification</span>
<span class="kn">from</span> <span class="nn">transformers</span> <span class="kn">import</span> <span class="n">pipeline</span>

<span class="kn">from</span> <span class="nn">unstructured.documents.elements</span> <span class="kn">import</span> <span class="n">NarrativeText</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.huggingface</span> <span class="kn">import</span> <span class="n">stage_for_transformers</span>

<span class="n">model_name</span> <span class="o">=</span> <span class="s2">&quot;hf-internal-testing/tiny-bert-for-token-classification&quot;</span>
<span class="n">tokenizer</span> <span class="o">=</span> <span class="n">AutoTokenizer</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">AutoModelForTokenClassification</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span>

<span class="n">nlp</span> <span class="o">=</span> <span class="n">pipeline</span><span class="p">(</span><span class="s2">&quot;ner&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">tokenizer</span><span class="o">=</span><span class="n">tokenizer</span><span class="p">)</span>

<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;From frost advisories this morning to a strong cold front expected later this week, the chance of fall showing up is real.</span>

<span class="s2">There&#39;s a refreshing crispness to the air, and it looks to get only more pronounced as the week goes on.</span>

<span class="s2">Frost advisories were in place this morning across portions of the Appalachians and coastal Maine as temperatures dropped into the 30s.</span>

<span class="s2">Temperatures this morning were in the 40s as far south as the Florida Panhandle.</span>

<span class="s2">And Maine even had a few reports of their first snow of the season Sunday. More cities could see their first snow later this week.</span>

<span class="s2">Yes, hello fall!</span>

<span class="s2">As temperatures moderate during the next few days, much of the east will stay right around seasonal norms, but the next blast of cold air will be strong and come with the potential for hazardous conditions.</span>

<span class="s2">&quot;A more active fall weather pattern is expected to evolve by the end of this week and continuing into the weekend as a couple of cold fronts move across the central and eastern states,&quot; the Weather Prediction Center said.</span>

<span class="s2">The potent cold front will come in from Canada with a punch of chilly air, heavy rain and strong wind.</span>

<span class="s2">The Weather Prediction Center has a slight risk of excessive rainfall for much of the Northeast and New England on Thursday, including places like New York City, Buffalo and Burlington, so we will have to look out for flash flooding in these areas.</span>

<span class="s2">&quot;More impactful weather continues to look likely with confidence growing that our region will experience the first real fall-like system with gusty to strong winds and a period of moderate to heavy rain along and ahead of a cold front passage,&quot; the National Weather Service office in Burlington wrote.</span>

<span class="s2">The potential for very heavy rain could accompany the front, bringing up to two inches of rain for much of the area, and isolated locations could see even more.</span>

<span class="s2">&quot;Ensembles [forecast models] show median rainfall totals by Wednesday night around a half inch, with a potential for some spots to see around one inch, our first substantial rainfall in at least a couple of weeks,&quot; the weather service office in Grand Rapids noted, adding, &quot;It may also get cold enough for some snow to mix in Thursday night to Friday morning, especially in the higher terrain north of Grand Rapids toward Cadillac.&quot;</span>

<span class="s2">There is also a chance for very strong winds to accompany the system.</span>

<span class="s2">The weather service is forecasting winds of 30-40 mph ahead of the cold front, which could cause some tree limbs to fall and sporadic power outages.</span>

<span class="s2">Behind the front, temperatures will fall.</span>

<span class="s2">&quot;East Coast, with highs about 5-15 degrees below average to close out the workweek and going into next weekend, with highs only in the 40s and 50s from the Great Lakes to the Northeast on most days,&quot; the Weather Prediction Center explained.</span>

<span class="s2">By the weekend, a second cold front will drop down from Canada and bring a reinforcing shot of chilly air across the eastern half of the country.&quot;&quot;&quot;</span>

<span class="n">elements</span> <span class="o">=</span> <span class="n">stage_for_transformers</span><span class="p">([</span><span class="n">NarrativeText</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">)],</span> <span class="n">tokenizer</span><span class="p">)</span>
</pre></div>
</div>
<p>The following optional keyword arguments can be specified in
<code class="docutils literal notranslate"><span class="pre">stage_for_transformers</span></code>:</p>
<blockquote>
<div><blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">buffer</span></code>: Indicates the number of tokens to leave as a buffer for the attention window. This is to account for special tokens like <code class="docutils literal notranslate"><span class="pre">[CLS]</span></code> that can appear at the beginning or end of an input sequence.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_input_size</span></code>: The size of the attention window for the model. If not specified, the default is the <code class="docutils literal notranslate"><span class="pre">model_max_length</span></code> attribute on the tokenizer object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">split_function</span></code>: The function used to split the text into chunks to consider for adding to the attention window. Splits on spaces be default.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">chunk_separator</span></code>: The string used to concat adjacent chunks when reconstructing the text. Uses spaces by default.</p></li>
</ul>
</div></blockquote>
<p>If you need to operate on text directly instead of <code class="docutils literal notranslate"><span class="pre">unstructured</span></code> <code class="docutils literal notranslate"><span class="pre">Text</span></code>
objects, use the <code class="docutils literal notranslate"><span class="pre">chunk_by_attention_window</span></code> helper function. Simply modify
the example above to include the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unstructured.staging.huggingface</span> <span class="kn">import</span> <span class="n">chunk_by_attention_window</span>

<span class="n">chunks</span> <span class="o">=</span> <span class="n">chunk_by_attention_window</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">tokenizer</span><span class="p">)</span>

<span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">nlp</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">chunks</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>For more information about the <code class="docutils literal notranslate"><span class="pre">stage_for_transformers</span></code> function, you can check the <a class="reference external" href="https://github.com/Unstructured-IO/unstructured/blob/a583d47b841bdd426b9058b7c34f6aa3ed8de152/unstructured/staging/huggingface.py">source code here</a>.</p>
</section>
<section id="stage-for-weaviate">
<h2><code class="docutils literal notranslate"><span class="pre">stage_for_weaviate</span></code><a class="headerlink" href="#stage-for-weaviate" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">stage_for_weaviate</span></code> staging function prepares a list of <code class="docutils literal notranslate"><span class="pre">Element</span></code> objects for ingestion into
the <a class="reference external" href="https://weaviate.io/">Weaviate</a> vector database. You can create a schema in Weaviate
for the <cite>unstructured</cite> outputs using the following workflow:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unstructured.staging.weaviate</span> <span class="kn">import</span> <span class="n">create_unstructured_weaviate_class</span>

<span class="kn">import</span> <span class="nn">weaviate</span>

<span class="c1"># Change `class_name` if you want the class for unstructured documents in Weaviate</span>
<span class="c1"># to have a different name</span>
<span class="n">unstructured_class</span> <span class="o">=</span> <span class="n">create_unstructured_weaviate_class</span><span class="p">(</span><span class="n">class_name</span><span class="o">=</span><span class="s2">&quot;UnstructuredDocument&quot;</span><span class="p">)</span>
<span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">unstructured_class</span><span class="p">]}</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">weaviate</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="s2">&quot;http://localhost:8080&quot;</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
</pre></div>
</div>
<p>Once the schema is created, you can batch upload documents to Weaviate using the following workflow.
See the <a class="reference external" href="https://weaviate.io/developers/weaviate">Weaviate documentation</a> for more details on
options for uploading data and querying data once it has been uploaded.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unstructured.partition.pdf</span> <span class="kn">import</span> <span class="n">partition_pdf</span>
<span class="kn">from</span> <span class="nn">unstructured.staging.weaviate</span> <span class="kn">import</span> <span class="n">stage_for_weaviate</span>

<span class="kn">import</span> <span class="nn">weaviate</span>
<span class="kn">from</span> <span class="nn">weaviate.util</span> <span class="kn">import</span> <span class="n">generate_uuid5</span>


<span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;example-docs/layout-parser-paper-fast.pdf&quot;</span>
<span class="n">elements</span> <span class="o">=</span> <span class="n">partition_pdf</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">strategy</span><span class="o">=</span><span class="s2">&quot;fast&quot;</span><span class="p">)</span>
<span class="n">data_objects</span> <span class="o">=</span> <span class="n">stage_for_weaviate</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">weaviate</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="s2">&quot;http://localhost:8080&quot;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">client</span><span class="o">.</span><span class="n">batch</span><span class="p">(</span><span class="n">batch_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="k">as</span> <span class="n">batch</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">data_object</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="o">.</span><span class="n">tqdm</span><span class="p">(</span><span class="n">data_objects</span><span class="p">):</span>
        <span class="n">batch</span><span class="o">.</span><span class="n">add_data_object</span><span class="p">(</span>
            <span class="n">data_object</span><span class="p">,</span>
            <span class="n">unstructured_class_name</span><span class="p">,</span>
            <span class="n">uuid</span><span class="o">=</span><span class="n">generate_uuid5</span><span class="p">(</span><span class="n">data_object</span><span class="p">),</span>
        <span class="p">)</span>
</pre></div>
</div>
<p>For more information about the <code class="docutils literal notranslate"><span class="pre">stage_for_weaviate</span></code> function, you can check the <a class="reference external" href="https://github.com/Unstructured-IO/unstructured/blob/a583d47b841bdd426b9058b7c34f6aa3ed8de152/unstructured/staging/weaviate.py">source code here</a>.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="chunking.html">
            <div class="page-info">
              <div class="context">
                <span>Next</span>
              </div>
              <div class="title">Chunking</div>
            </div>
          </a>
          <a class="prev-page" href="extracting.html">
            <div class="page-info">
              <div class="context">
                <span>Previous</span>
              </div>
              
              <div class="title">Extracting</div>
              
            </div>
          </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
              Copyright &#169; 2022-2023, Unstructured Technologies
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Staging</a><ul>
<li><a class="reference internal" href="#convert-to-csv"><code class="docutils literal notranslate"><span class="pre">convert_to_csv</span></code></a></li>
<li><a class="reference internal" href="#convert-to-dataframe"><code class="docutils literal notranslate"><span class="pre">convert_to_dataframe</span></code></a></li>
<li><a class="reference internal" href="#convert-to-dict"><code class="docutils literal notranslate"><span class="pre">convert_to_dict</span></code></a></li>
<li><a class="reference internal" href="#dict-to-elements"><code class="docutils literal notranslate"><span class="pre">dict_to_elements</span></code></a></li>
<li><a class="reference internal" href="#stage-csv-for-prodigy"><code class="docutils literal notranslate"><span class="pre">stage_csv_for_prodigy</span></code></a></li>
<li><a class="reference internal" href="#stage-for-argilla"><code class="docutils literal notranslate"><span class="pre">stage_for_argilla</span></code></a></li>
<li><a class="reference internal" href="#stage-for-baseplate"><code class="docutils literal notranslate"><span class="pre">stage_for_baseplate</span></code></a></li>
<li><a class="reference internal" href="#stage-for-datasaur"><code class="docutils literal notranslate"><span class="pre">stage_for_datasaur</span></code></a></li>
<li><a class="reference internal" href="#stage-for-label-box"><code class="docutils literal notranslate"><span class="pre">stage_for_label_box</span></code></a></li>
<li><a class="reference internal" href="#stage-for-label-studio"><code class="docutils literal notranslate"><span class="pre">stage_for_label_studio</span></code></a></li>
<li><a class="reference internal" href="#stage-for-prodigy"><code class="docutils literal notranslate"><span class="pre">stage_for_prodigy</span></code></a></li>
<li><a class="reference internal" href="#stage-for-transformers"><code class="docutils literal notranslate"><span class="pre">stage_for_transformers</span></code></a></li>
<li><a class="reference internal" href="#stage-for-weaviate"><code class="docutils literal notranslate"><span class="pre">stage_for_weaviate</span></code></a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div>
</body>
</html>